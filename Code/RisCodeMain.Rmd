---
title: "Laboratorio didattico"
subtitle: "The Psychological Burden of the COVID-19"
author: "None"
date: "`r format(Sys.Date())`"
output:
  html_document:
    highlight: pygments
    fig_caption: yes
    toc: TRUE
    toc_depth: 2
    number_sections: TRUE
    toc_float:
      smooth_scroll: FALSE
---

Carico i pacchetti necessari:
```{r}
suppressPackageStartupMessages({
  library("tidyverse")
  library("here")
  library("rio")
  library("brms")
  library("psych")
  library("cmdstanr")
})
```

Lettura dei dati:
```{r}
df <- rio::import(here::here("DatiR", "hope_violence_final.dta"))
```

Per capire a cosa corrisponda la codifica di `country` conto il numero di casi in ciascun paese e in ciascuna wave. 
```{r}
table(df$wave, df$country)
```
glimpse()   #WilliamTranchino: istogramma sui gender
```{r}
gender_items <- df %>%
  select("gender")
gender <- rowSums(gender_items) 
hist(gender)
```
#LeonardoPecori: Istogramma sulle nazioni, volevo colorare il grafico in base alla quantita'
```{r}
country_items <- df %>%
    select("country")
country <- rowSums(country_items) 
hist(country)
```
#GiuliaViliani: selezione dal data.frame della sezione "race" + sua rappresetazione in un istogramma e creazione del vettore race_items
```{r}
race_items <- df %>%
  select("race")
race <- rowSums(race_items)
hist(race)
```
#SamantaRoncolino: creazione del grafico della variabile "education_rc"
```{r}
table(df$education_rc)   # Frequenza assoluta della variabile education_rc

# Creo una tabella in cui assegno a "low", "medium" e "high" (le modalità della variabile education_rc) le rispettive frequenze assolute:
education_freq <- tribble(     
  ~education,         ~freq,
  "low",              5408,
  "medium",           3431,
  "high",             1860
) 

education_freq 

# Questo vettore è utile per riordinare l'asse x secondo un preciso ordine in ggplot:
positions <- c("low", "medium", "high") 

# Utilizzo ggplot per creare un grafico colorato ed ordinato secondo "low", "medium" e "high"
grafico_education <- ggplot(data = education_freq) +
  geom_bar(mapping = aes(x = education, y = freq, fill = education), stat = "identity") + 
  scale_fill_manual("legend", values = c("low" = "yellow", "medium" = "orange", "high" = "red")) + 
  scale_x_discrete(limits = positions)

grafico_education
```

