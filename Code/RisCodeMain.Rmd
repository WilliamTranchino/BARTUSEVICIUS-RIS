---
title: "Laboratorio didattico"
subtitle: "The Psychological Burden of the COVID-19"
author: "None"
date: "`r format(Sys.Date())`"
output:
  html_document:
    highlight: pygments
    fig_caption: yes
    toc: TRUE
    toc_depth: 2
    number_sections: TRUE
    toc_float:
      smooth_scroll: FALSE
---
Carico i pacchetti necessari:
```{r}
suppressPackageStartupMessages({
  library("tidyverse")
  library("here")
  library("rio")
  library("brms")
  library("psych")
  library("cmdstanr")
})
```
Lettura dei dati:
```{r}
df <- rio::import(here::here("DatiR", "hope_violence_final.dta"))
```

Per capire a cosa corrisponda la codifica di `country` conto il numero di casi in ciascun paese e in ciascuna wave. 
```{r}
table(df$wave, df$country)
```

#WilliamTranchino: iniziale selezione dei parametri da analizzare "gender", creazione dell'istogramma di gender
```{r}
gender_items <- df %>%
  select("gender")
gender <- rowSums(gender_items) 
hist(gender)
```

#LeonardoPecori: Istogramma sulle nazioni, volevo colorare il grafico in base alla quantita'
```{r}
country_items <- df %>%
    select("country")
country <- rowSums(country_items) 
hist(country)
```

#GiuliaViliani: selezione dal data.frame della sezione "race" + sua rappresetazione in un istogramma e creazione del vettore race_items
```{r}
race_items <- df %>%
  select("race")
race <- rowSums(race_items)
hist(race)
```
#MartinaSplendorini: creazione istogramma da sezione "profile_age5"
```{r}
glimpse(df)
profile_age5_items <- df %>%
    select("profile_age5")
profile_age <- rowSums(profile_age5_items)
hist(profile_age)
```

#LorenzoZerauschek: selezione del data.frame di education_rc, rappresentato in istogramma, creato vettore "education_rc_items"
```{r}
education_rc_items <- df %>%
  select("education_rc")
education <- rowSums(education_rc_items)
hist(education)
```

#MatteoPortici: selezione della sezione education_rc del data.frame con relativa creazione dell'istogramma e del vettore education_items
```{r}
education_items <- df %>%
  select("education_rc")
education_rc<- rowSums(education_items) 
hist(education_rc)
```

#MatildePapini: Ho selezionato dal df della variabile "dropout" e ho creato l'istogramma ed il vettore "dropout_items".
```{r}
glimpse(df)
dropout_items <- df %>%
  select(dropout)
dropout <-rowSums(dropout_items)
hist(dropout)
```

#GretaMenichetti creazione vettore education_items,selezione dal data.frame della sezione "education_rc" e creazione istogramma per education_rc 
```{r}
education_items <- df %>%
  select("education_rc")
education_rc <- rowSums(education_items)
hist(education_rc)
```

#VirginiaSimoncini:selezione dal data.frame della sezione "education_rc" + sua rappresetazione in un istogramma e creazione del vettore education_items
```{r}
education_items <- df %>%
  select("education_rc")
education <- rowSums(education_items)
hist(education)
```

#ReginaMeister:calcolo il nr.dei partecipanti al progetto nella 1. e nella2.ondata e paragono i numeri.
      1    2    3    4
  1 1524 1521 1543 1543
  2 1151 1286 1241  890
  1.ondata:6131
  2.ondata:4568
 calcolo percentuale:74,5% dei partecipanti della 1.onda partecipa al progetto in 2.onda
 nel testo gli autori parlano di 25% di partecipanti in meno nel progetto in 2.onda
 osservo un 0,5 % di differenza tra il nr. calcolato ed il valore espresso dagli autori nel testo.
commento:ancora ho difficoltà con R
```{r}
country_items <- df %>%
  select("country")
country <- rowSums(country_items) 
hist(country)
``` 
 
#FlaviaNatoli: selezionato dal data.frame la sezione "country" e ho fatto una rappresetazione in un istogramma e creato il vettore country_items
commento: ho ancora molte difficoltà con R
```{r}
country_items <- df %>%
  select("country")
race <- rowSums(country_items)
hist(country)
```
 
#AlessandroPodda:selezione dal data.frame della sezione "race" e istogramma su campo ristretto.
```{r}
race_items <- df %>%
  select("race")
race[300:500]
hist(race[300:500])
```

#ChiaraManetti:selezione della sezione "wave"con la rappresentazione del suo istogramma e creazione del vettore wave_items
```{r}
wave_items<-df%>%
  select("wave")
wave<-rowSums(wave_items)
hist(wave)
```

#MartinaPierallini: dati dei dropouts prelevati dal df e rappresentati in un istogramma:
```{r}
dropout_items <- df %>%
     select("dropout")
dropout <- rowSums(dropout_items)
hist(dropout)
```

#AlessiaNesti: selezione dalla sezione "dropout" +  rappresentazione istogramma. 
```{r}
dropout_item <- df %>%
  select("dropout")
dropout <- rowSums(dropout_item)
hist(dropout)
```

#SamantaRoncolino: creazione del grafico della variabile "education_rc"
```{r}
table(df$education_rc)   # Frequenza assoluta della variabile education_rc
# Creo una tabella in cui assegno a "low", "medium" e "high" (le modalità della variabile education_rc) le rispettive frequenze assolute:
education_freq <- tribble(     
  ~education,         ~freq,
  "low",              5408,
  "medium",           3431,
  "high",             1860
) 
education_freq 
# Questo vettore è utile per riordinare l'asse x secondo un preciso ordine in ggplot:
positions <- c("low", "medium", "high") 
# Utilizzo ggplot per creare un grafico colorato ed ordinato secondo "low", "medium" e "high"
grafico_education <- ggplot(data = education_freq) +
  geom_bar(mapping = aes(x = education, y = freq, fill = education), stat = "identity") + 
  scale_fill_manual("legend", values = c("low" = "yellow", "medium" = "orange", "high" = "red")) + 
  scale_x_discrete(limits = positions)
grafico_education


```

#IsabellaScavone: selezione dal data.frame della sezione "dropout" e creazione dell'istogramma
```{r}
dropout_items <- df %>%
  select("dropout")
dropout <- rowSums(dropout_items) 
hist(dropout)
```

#AlessiaMassini: selezione della variabile "education_rc" + rappresentazione grafica in un density plot  
```{r} 
education_items <- df %>% 
  select("education_rc")
df %>% 
  ggplot(aes(x = education_rc)) + 
  geom_density( 
    aes(x = education_rc), 
    adjust = 0.5, 
    size = 0.8, 
    alpha = 0.5 
    ) + 
  labs( 
    x = "Education level", 
    y = "Frequency" 
  ) 
``` 

#SerenaSooriya: boxplot della variabile gender 
```{r}
gender_items <- df %>%
  select("gender")
gender <- rowSums(gender_items)
boxplot(gender)
```

#MartaMariottini: selezione dal data frame della sezione "gender", campo ristretto, istogramma 
```{r} 
gender_items <- df %>% 
  select("gender") 
gender[600:1000] 
hist(gender[600:1000]) 
``` 
