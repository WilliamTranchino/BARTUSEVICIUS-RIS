---
title: "Laboratorio didattico"
subtitle: "The Psychological Burden of the COVID-19"
author: Corrado Caudek
date: "19-05-2022"
output:
  html_document:
    highlight: pygments
    fig_caption: yes
    toc: TRUE
    toc_depth: 2
    number_sections: TRUE
    toc_float:
      smooth_scroll: FALSE
---
<h1>Premesse generali</h1>
<p>1.Durante lo svolgimento dei vari report, per consentire una migliore comunicazione e fruibilita' del materiale da noi prodotto abbiamo usufruito dello strumento GitKraken, ovvero un software che ci consentiva di avere, ognuno sulla propria macchina, il progetto condiviso da tutti senza doverci incontrare fisicamente. <br>
2.Abbiamo suddiviso il lavoro fra noi tenendo di conto dei punti di forza di ciascuno, in modo da valorizzare più aspetti possibili del progetto</p>



<h1>In cosa consiste la ricerca </h1>
<p>I ricercatori si sono interessati alle possibili associazioni che possono intercorrere tra il carico psicologico dato dal COVID-19 e i seguenti fenomeni: gli atteggiamenti anti sistemici, quali l’insoddisfazione con l’ordine politico e la struttura sociale, l’attivismo politico pacifico e la violenza politica.<br>
I campioni sono adulti provenienti da USA, Italia, Danimarca e Ungheria.<br>
Infine, i dati sulle sue ondate sono stati raccolti attraverso sondaggi somministrati online. </p>



<h1>Cosa andremo a fare   </h1>
<p> Il  nostro lavoro si concentrera’ maggiormente sulla prima ipotesi. Difatti, andremo a sottrarre dalla totalità dei dati quanto i cittadini delle quattro nazioni concordano o meno con le misure adottate dai governi contro il COVID-19, durante le due ondate. Tali “atteggiamenti” sono stati misurati tramite una scala Likert che comprende valori da 0 (fortemente in disaccordo) a 6 (fortemente d’accordo). <br>
descrizione che faremo una beta-binomiale… <br>
Ciononostante, la nostra priori non comprenderà tutti i punteggi ricavati, ma solo parte di essi. Infatti, attraverso il comando R ifelse() andremo a determinare gli insuccessi e i successi. y saranno quei valori > numero a caso , mentre i restanti verranno considerati insuccessi.  <br>
Nel nostro caso verrà utilizzata una distribuzione a priori uniforme (Beta di parametri alpha = ? e beta = ?) – debolmente informativa/informativa?
</p>


rimuovere da qui zzz

1. L’articolo di Bartusevicius preso in considerazione tratta il tema della relazione tra gli effetti psicologici del COVID-19 e gli atteggiamenti anti-sistemici di attivismo politico pacifico e violenza politica attuati dalla popolazione in Danimarca, Stati Uniti, Italia e Ungheria
2. Nonostante vi fossero studi separati degli effetti psicologici della pandemia da COVID-19 e degli
atteggiamenti politici (in generale) non ve ne era nessuno che cercasse di trovare e misurare una relazione
tra questi.
3. l'obiettivo è quello di capire gli effetti dei comportamenti politici dei singoli, (need for caos-desiderio di un nuovo inizio) che sfociano nell'ostilità verso i governi in seguito all'erosione delle relazioni sociali, i problemi di salute e le perdite socio-economiche dati dal carico
psicologico del covid-19
4. Vengono raccolti dati Panel a due onde (vale a dire misurazioni ripetute di individui) tramite
sondaggi online su adulti in paesi con diversi gradi di polarizzazione politica o animosità attraverso
linee di parte.
5. Dopo aver effettuato questi studi possiamo arrivare alla conclusione che vede la pandemia come protagonista rispetto all’aumento di agitazioni politiche, spesso a sfondo violento, in vari stati sia europei che extra-europei. 
6. Secondo le analisi della Perceived-Covid 19 Burden Scale per la prima ondata e della Need for
Chaos Scale per la seconda ondata, il cambiamento del carico percepito di covid 19 sarebbe
associato ad un cambiamento del 6% nella necessità di caos che porta anche ad atteggiamenti di
attivismo e violenza politica, ma non con partecipazione autodichiarata alle proteste
7. La causa che ha spinto gli autori a intraprendere tale ricerca è principalmente la seguente: l’assenza di studi validi che esaminassero l’influenza della pandemia sui comportamenti antisistematici. Inoltre, la validità dei risultati è stata confermata da ulteriori analisi, ad eccezione del campione americano che è risultato scarsamente affidabile.

fino a qui rimuovere zzz

<p>Carico i pacchetti necessari: </p>
```{r}
suppressPackageStartupMessages({
  #TODO:verificare se i pacchetti caricati servono tutti o meno zzz rimuovere commento
  #TODO: verificare se ne essario aggiungere pacchetti zzz rimuovere commento
  library("tidyverse")
  library("here")
  library("rio")
  library("brms")
  library("psych")
  library("cmdstanr")
})
```
<p>Lettura dei dati:</p>
```{r}
df <- rio::import(here::here("DatiR", "hope_violence_final.dta"))
```
Inizio metodo a griglia "rimuovere questa riga zzz"
TODO: Inserire breve descrizione di cosa sara' qui sotto
```{r}
table(df$education_rc)   # Frequenza assoluta della variabile education_rc
# Creo una tabella in cui assegno a "low", "medium" e "high" (le modalità della variabile education_rc) le rispettive frequenze assolute:
education_freq <- tribble(     
  ~education,         ~freq,
  "low",              5408,
  "medium",           3431,
  "high",             1860
) 
education_freq 
# Questo vettore è utile per riordinare l'asse x secondo un preciso ordine in ggplot:
positions <- c("low", "medium", "high") 
# Utilizzo ggplot per creare un grafico colorato ed ordinato secondo "low", "medium" e "high"
grafico_education <- ggplot(data = education_freq) +
  geom_bar(mapping = aes(x = education, y = freq, fill = education), stat = "identity") + 
  scale_fill_manual("legend", values = c("low" = "yellow", "medium" = "orange", "high" = "red")) + 
  scale_x_discrete(limits = positions)
grafico_education
```

```{r} 
education_items <- df %>% 
  select("education_rc")
df %>% 
  ggplot(aes(x = education_rc)) + 
  geom_density( 
    aes(x = education_rc), 
    adjust = 0.5, 
    size = 0.8, 
    alpha = 0.5 
    ) + 
  labs( 
    x = "Education level", 
    y = "Frequency" 
  ) 
``` 

```{r}
pcbs10_items <- df %>%
   select(
     starts_with("Q7_")
    ) 
```

```{r}
summary(pcbs10_items)
```

```{r}
pcbs10_items_1 <- pcbs10_items - 1
summary(pcbs10_items_1)
```

```{r}
keys <- c(1, -1, -1, 1, -1, 1, -1, 1, -1, 1)  #reverse -1 items
pcbs10_items_r <- reverse.code(
  keys, 
  pcbs10_items_1, 
  mini=rep(0, 10), 
  maxi=rep(6, 10)
)
pcbs10_items_1[1:3, ]
```

```{r}
pcbs10_items_r[1:3, ]
```

```{r}
df$pcbs10 <- rowSums(pcbs10_items_r) / 10 
hist(df$pcbs10)
```

```{r}
df %>% 
  group_by(wave) %>% 
  summarise(
    avg_pcbs10 = mean(pcbs10),
    sd_pcbs10 = sd(pcbs10),
    min_pcbs10 = min(pcbs10),
    max_pcbs10 = max(pcbs10),
    n = n()
  )
```
Tutti i paesi wave 1 & 2
```{r}
theta <- seq(0, 1, length.out = 1e5) #numero di osservazioni

#Quanto concordi con le misure adottate dal governo
#la risposta con range da 0 fortemente in disaccordo a 6 fortemente d'accordo 
#tutte le persone del paese 4 con punteggio superiore a 4 nella wave 2

y_dati<-sum(ifelse(df$pcbs10>4,1,0)) #successi
n_dati<-length(df$pcbs10) #campione totale

like<-dbinom(y_dati, n_dati, theta) #verosimiglianza
plot(y = like, x = theta, type = "l")
max_verosim<-max(like) #valore massimo della verosimiglianza
max_verosim #valore piu' plausibile
```
Hungary wave 2
```{r}
theta <- seq(0, 1, length.out = 1e5) #numero di osservazioni

#Quanto concordi con le misure adottate dal governo
#la risposta con range da 0 fortemente in disaccordo a 6 fortemente d'accordo 
#tutte le persone del paese 4 con punteggio superiore a 4 nella wave 2

y_dati<-sum(ifelse(df$country==4 & df$pcbs10>4,1,0)) #successi
n_dati<-sum(ifelse(df$country==4 & df$wave==2,1,0)) #campione totale

like<-dbinom(y_dati, n_dati, theta) #verosimiglianza
plot(y = like, x = theta, type = "l")
max_verosim<-max(like) #valore massimo della verosimiglianza
max_verosim #valore piu' plausibile
```
<br>Il progetto e' stato svolto da:
<br>Virginia Simoncini
<br>William Tranchino
<br>Giulia Viliani
<br>Samanta Roncolino
<br>Regina Meister
<br>Lorenzo Zerauschek
<br>Alessia Nesti
<br>Martina Pierallini
<br>Greta Menichetti
<br>Elisa Pellegrini
<br>Chiara Manetti
<br>Elisa Placedi
<br>Flavia Natoli
<br>Costanza Lunari
<br>Marta Mariottini
<br>Gaia Lenzini
<br>Matteo Portici
<br>Camilla Pensalfini
<br>Leonardo Pecori
<br>Lorenza Paladini
<br>Eleonora Lunardi
<br>Serena Sooriya
<br>Isabella Scavone
<br>Alessia Massini
<br>Matilde Papini
<br>Martina Splendorini
